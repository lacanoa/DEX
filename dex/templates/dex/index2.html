
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DEX</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
<script
  src="http://code.jquery.com/jquery-3.2.1.js"
  integrity="sha256-DZAnKJ/6XZ9si04Hgrsxu/8s717jcIzLy3oi35EouyE="
  crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css">

<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<link rel="stylesheet" type="text/css" href="/static/dex/stylz.css">
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://code.highcharts.com/stock/modules/exporting.js"></script>


<style>
html {
    background-color:black;
}
::-webkit-scrollbar {
    width:9px;
}
::-webkit-scrollbar-corner {
    background: transparent;
}
::-webkit-scrollbar-track {
    -webkit-border-radius:5px;
    border-radius:5px;
    background:rgba(0,0,0,0.1);
}

::-webkit-scrollbar-thumb {
    -webkit-border-radius:5px;
    border-radius:5px;
    background:rgba(0,0,0,0.2);
}

::-webkit-scrollbar-thumb:hover {
    background:rgba(0,0,0,0.4);
}

::-webkit-scrollbar-thumb:window-inactive {
    background:rgba(0,0,0,0.05);
}
body {
    font-size: 0.75rem;
    max-height:800px;
    overflow:hidden;
}
#div_for_futures_list {
    overflow-y: scroll;
    max-height: 600px;
    padding-bottom: 100px;
}
div {
    border: 1px solid black;
}
#vhbox {
    height: 100vh;
    background-color: black;
    color: white;
}
#mid_pane {
    background-color:rgb(34,34,34);
    color:grey;
    display: block;
    overflow-y: scroll;
    min-width: 950px;
    padding-bottom: 250px;
    padding-left: 0px;
    height:800px;
    height:-webkit-fill-available;
}
#mid_pane_header {
    width: 96%;
    margin-right: auto;
}
#le==ft_col {
    width:250px;
}
.mid_pane_table {
    width: 400px;
    margin-left: auto;
    margin-right: auto;
}
#orders {
    position: fixed;
    height: 250px;
    width: 71%;
    bottom: 0;
    background-color:black;
    z-index: 5;
}
#div_for_futures_list {
    overflow-y: scroll;
    height: -webkit-fill-available;
}


#formita {
    width: 600px;
    margin-left: auto;
    margin-right: auto;
    margin-top: 20%;
}
#ultimate > table > tr >input {
    width: 70px;
}
form#add_trade_account {
    width: 200px;
---    padding-top: 10%;
    margin-left: auto;
    margin-right: auto;
}

td {
    min-width: 20px;
}
.volatility {
    padding-left: 5px;
    padding-right: 25px;
    border-right: 1px solid;
}
.strike {
    padding-right: 0px;
    padding-left: 25px;
    color: lightgray;
    border-left: 1px solid grey;
}
.expiration_head {
    background-color: rgb(0,120,203);
    color: white;
    border: 1px solid grey;
}
th.expiration_head_col {
    font-weight: 400;
}
.chain_head {
    background-color: aliceblue;
    opacity: 0.8;
    color: rgb(34,34,34);
}
.strike_headcol {
    text-align:right;
}
.greek_headcol {
    color: skyblue;
    text-align: center;
}
#margins_sum {
    width:100%;
}
#greeks_sum {
    width:100%;
}
#order_totals_table {
    width:100%;
}
#order_margins_table {
    width:100%;
}
#rowy {
    margin: 0
}
#chartyboy {
    padding: 0
}
#widener {
    border: 0;
    min-width: 840px;
}
.option_parms_form {
}
.option_parms {
    font-size: .65rem;
    font-weight: lighter;
}
.summy_sm {
    font-size:larger;
    color:white;
    height:29px;
}
.summy {
    font-size:large;
    color:white;
}
.qty_input {
    background: inherit;
    color: inherit;
    width: 50px;
    border: inherit;
    text-align:right;
}
.parms_input {
    background: inherit;
    color: white;
    width: 50px;
    border: inherit;
}
.juk {
    padding:2px;
}
div#introscreen {
    height: 100%;
    width: 100%;
    position: fixed;
    z-index: 10;
    top: 0;
    left: 0;
    background-color: rgb(0,120,203);
    overflow-x: hidden;
    transition: 2s;
}
div#alertwindow {
    height: 100%;
    width: 100%;
    position: fixed;
    z-index: 10;
    top: 0;
    left: 0;
    background-color: rgba(0,120,203,0.5);
    overflow-x: hidden;
    transition: 0.5s;
}
div#alerttradeaccount {
    height: 100%;
    width: 100%;
    position: fixed;
    z-index: 10;
    top: 0;
    left: 0;
    background-color: rgba(0,120,203,0.5);
    overflow-x: hidden;
    transition: 0.5s;
}
.brut {
    background-color: rgba(0,0,0,0);
    transition: 1s;
}
.bomb {
    background-color: rgba(0,255,0,1);
    transition: 0s;
}
.blood {
    background-color: rgba(255,0,0,1);
    transition: 0s;
}
.cool {
    background-color: rgba(0,0,255,1);
    transition: 0s;
}
#account_list {
    display: block;
    height: 200px;
    overflow-y: scroll;
    transition: 1s;
}
</style>
</head>
<body>
<div id="introscreen"></div>
<div class="container-fluid">
  <div id="vhbox" class="row">
    <div class="col" id="left_col">
<div id='menubar'>
<ul class="nav navbar-nav navbar-right">
        {% if user.is_authenticated %}
            <li><a href="{% url 'auth:logout' %}">Logout</a></li>
            {% endif %}
        </ul>
<div class='row'>
<div class='col'>
    <h4 onclick="toggleAccountPage()">Accounts</h4>
</div>
<div class="col">
<h4 onclick="toggleAccountList()">V</h4>
</div>
</div>
</div>
<div id="alerttradeaccount">
<form id="add_trade_account" action="" method="post">
{% csrf_token %}
</form>
</div>
<div id='alertwindow'>
<form id='formita' action="" method="post">
{% csrf_token %}
</form>
</div>
</div>
    <div id="mid_pane" class="col">
    <div id="mid_pane_accounts" style="display:none"></div>
      <form id="mid_pane_header" onsubmit="preacher(this)"></form>
<div id="orders"></div>
    </div>
    <div class="col">
      3 of 3
    </div>
  </div>
</div>


 <div id="phone-calls">
</div>
<form id="refreshpos" action=" " method="post" style="display:none">
{% csrf_token %}
<input type="submit" value="May" id="yf" ></input>
</form>
<script src="https://d3js.org/d3.v4.min.js"></script>
 <script src="https://cdn.socket.io/socket.io-1.3.5.js"></script>

<script>
console.log('options worker is here')
var T1 = new Date();
var times =  {'T1':T1,}
window.futures = {% autoescape off %}{{ futures }}{% endautoescape %};
window.mona = {% autoescape off %}{{ mona }}{% endautoescape %};
window.rts_min = {% autoescape off %}{{ rts_min }}{% endautoescape %};
window.rvi_min = {% autoescape off %}{{ rvi_min }}{% endautoescape %};
window.accus = {% autoescape off %}{{ accus }}{% endautoescape %};
window.cuser = "{{cuser}}";
window.posh = {{positions|safe}}
function dont_miss_the_strike(price) {
window.rip = price
}
function locate_the_options(message) {
//console.log(message)
located_message = message
}
var sofar = []

function baltic() {
}

//var socket = io.connect({transports: ['websocket']});
var socket = io.connect("http://139.59.208.173:3000/",{transports: ['websocket']});

socket.on('fixa', function(msg){
window.msg = msg

if (msg.payload.split(',')[0] == 'baltic') {
	baltic(msg)
} else {

if (msg.payload.split(',')[0] == 'ri_options') {
	locate_the_options(msg)
	//sofar.push(msg)
} else {

	if (msg.payload.split(',')[0] == 'ri_snap_mirror') {
		console.log('mirroring')
		window.mirror = msg
		var juice = {
			key: Date.parse(msg.payload.split(',')[2]),
			value: {
		ttm_1:msg.payload.split(',')[5],
		ttm_2:msg.payload.split(',')[9],
		ttm_3:msg.payload.split(',')[13],
		ttm_4:msg.payload.split(',')[17],
		vol_1:msg.payload.split(',')[8],
		vol_2:msg.payload.split(',')[12],
		vol_3:msg.payload.split(',')[16],
		vol_4:msg.payload.split(',')[20],
			}
		}
		juw.push(juice)
	} else {
		if (msg.payload.split(',')[0] == 'bal') {
			//console.log(msg)
			$('#'+msg.payload.split(',')[2].split(' ')[0].replace(/\./g,''))[0].children[1].innerHTML = msg.payload.split(',')[3]
			$('#'+msg.payload.split(',')[2].split(' ')[0].replace(/\./g,''))[0].children[2].innerHTML = msg.payload.split(',')[4]
			$('#'+msg.payload.split(',')[2].split(' ')[0].replace(/\./g,''))[0].children[3].innerHTML = msg.payload.split(',')[5]

			if (msg.payload.split(',')[2].split(' ')[0].replace(/\./g,'') == 'RIZ7') {
				stockprice = Number(msg.payload.split(',')[5])
			}

			dont_miss_the_strike(msg.payload.split(',')[5])
			//window.msg = msg
		} else {
			console.log('wtf?')
			window.wtf = msg
		}
	}

}
}
});
</script>
<script type="text/javascript" src="/static/dex/options_math.js"></script>
<script type="text/javascript" src="/static/dex/worker.js"></script>
<script type="text/javascript" src="/static/dex/worker_page2.js"></script>
<script type="text/javascript" src="/static/dex/worker_hc.js"></script>
<script type="text/javascript" src="/static/dex/worker_order.js"></script>
<script type="text/javascript" src="/static/dex/switchsex.js"></script>
<script>
window.margins = {% autoescape off %}{{ margins }}{% endautoescape %};
function uncrazeThePosh(posh) {
	var push = []
	push.message = posh
	return push 
}
push = uncrazeThePosh(posh)
miramaxW(push)
</script>
</body>
</html>

